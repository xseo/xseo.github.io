<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
        <channel>
                <title>P/MEAN and co.</title>
                <description>Programming blog by @demisx1 on software patterns and solutions utilized in a full-stack</description>
                <link>http://demisx.github.io</link>
                <atom:link href="http://demisx.github.io/feed.xml" rel="self" type="application/rss+xml" />
                
                        <item>
                                <title>How to prune local git tags that don&#39;t exist on remote</title>
                                <description>&lt;p&gt;As of git &lt;code&gt;1.9.4&lt;/code&gt;, it appears that there is no easy way to remove local tags
that don&amp;#39;t exist on remote (a.k.a &amp;quot;stale tags&amp;quot;). According 
to &lt;code&gt;--prune&lt;/code&gt; option in &lt;code&gt;git fetch&lt;/code&gt; &lt;a href=&quot;http://git-scm.com/docs/git-fetch&quot;&gt;documentaiton&lt;/a&gt; :&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Tags are not subject to pruning if they are fetched only because of the 
default tag auto-following or due to a &lt;code&gt;--tags&lt;/code&gt; option. However, 
if tags are fetched due to an explicit refspec 
(either on the command line or in the remote configuration, 
for example if the remote was cloned with the &lt;code&gt;--mirror&lt;/code&gt; option), 
then they are also subject to pruning.. &lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;To put it simple, if you are trying to do something like &lt;code&gt;git fetch -p -t&lt;/code&gt;, 
it will not work starting with git version &lt;code&gt;1.9.4&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;However, there is a simple workaround that still works in latest versions:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git tag -l &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; xargs git tag -d &lt;span class=&quot;c&quot;&gt;# remove all local tags&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git fetch -t                  &lt;span class=&quot;c&quot;&gt;# fetch remote tags&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A one liner can be written as:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git tag -l &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; xargs git tag -d &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; git fetch -t
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Alternative, you can add a new alias to your &lt;code&gt;~/.gitconfig&lt;/code&gt; file to make things 
shorter:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;# in ~/.gitconfig&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;alias&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
    ... ... ... &lt;span class=&quot;c&quot;&gt;# your existing aliases&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;pt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; !git tag -l &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; xargs git tag -d &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; git fetch -t
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, you can simply call &lt;code&gt;pt&lt;/code&gt; alias to prune local stale tags:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git pt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div id=&#39;footer-spacing&#39; &gt;&lt;/div&gt;

&lt;p class=&quot;text-center&quot; style=&quot;line-height:20px;&quot;&gt;
  &lt;a class=&quot;twitter-follow-button&quot;
    href=&quot;https://twitter.com/demisx1&quot;
    data-show-count=&quot;false&quot;
    data-lang=&quot;en&quot;
    data-size=&quot;large&quot;&gt;Follow @demisx1
  &lt;/a&gt; for more tips and best practices.
&lt;/p&gt;

&lt;div id=&#39;footer-spacing&#39;&gt;&lt;/div&gt;

&lt;hr&gt;

&lt;p&gt;Today my environment was:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Git 1.2.1&lt;/li&gt;
&lt;li&gt;Mac OS X 10.10&lt;/li&gt;
&lt;/ul&gt;
</description>
                                <pubDate>Sun, 02 Nov 2014 06:08:00 -0500</pubDate>
                                <link>http://demisx.github.io//git/2014/11/02/git-prune-local-tags-dont-exist-remote.html</link>
                                <guid isPermaLink="true">http://demisx.github.io//git/2014/11/02/git-prune-local-tags-dont-exist-remote.html</guid>
                        </item>
                
                        <item>
                                <title>Unit testing AngularJS child directive that requires parent directive</title>
                                <description>&lt;p&gt;In AngularJS we can have one or more directives communicate with each other. This 
gives us an ability to create web components (hello AngularJS 2.0) that are built 
from multiple directives. In order to for a directive A to access the API methods 
defined in a controller of a directive B, the latter needs to define the &lt;code&gt;require:&lt;/code&gt; 
property with a value set to the name of directive A and specify how the search
should be performed (in my example, I prefix directive name with &lt;code&gt;^^&lt;/code&gt;, so the
search for controlelr is done on the parent DOM elements only). The compilation 
of directive B will fail if directive A controller cannot be found in the &amp;quot;search path&amp;quot;.&lt;/p&gt;

&lt;div class=&quot;alert alert-warning&quot;&gt;
&lt;i class=&quot;fa fa-bell-o fa-2x&quot;&gt;&lt;/i&gt;
  Please note, when using `require` property, the directives will share 
  &lt;b&gt;the same instance&lt;/b&gt; of the controller.
&lt;/div&gt;

&lt;p&gt;Here is an example of a directive B requiring presence of directive A controller
on a parent DOM element:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-coffeescript&quot; data-lang=&quot;coffeescript&quot;&gt;&lt;span class=&quot;lineno&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angular&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;app.directives&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 2&lt;/span&gt; 
&lt;span class=&quot;lineno&quot;&gt; 3&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;directive&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;directiveA&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;-&amp;gt;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 4&lt;/span&gt;   &lt;span class=&quot;nv&quot;&gt;restrict: &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;E&amp;#39;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 5&lt;/span&gt;   &lt;span class=&quot;nv&quot;&gt;controller: &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;-&amp;gt;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 6&lt;/span&gt;     &lt;span class=&quot;vi&quot;&gt;@add = &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;(x,y) -&amp;gt;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 7&lt;/span&gt;       &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 8&lt;/span&gt;   &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 9&lt;/span&gt;   
&lt;span class=&quot;lineno&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;directive&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;directiveB&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;-&amp;gt;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;11&lt;/span&gt;   &lt;span class=&quot;nv&quot;&gt;restrict: &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;E&amp;#39;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;12&lt;/span&gt;   &lt;span class=&quot;nv&quot;&gt;require: &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;^^directiveA&amp;#39;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# search for directive A controller on the parent elements&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;13&lt;/span&gt;   &lt;span class=&quot;nv&quot;&gt;link: &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;(scope, elem, attrs, ctrl) -&amp;gt;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;14&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;# let&amp;#39;s define some function on directive B scope &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;15&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;# that leverages the business logic of directive A&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;16&lt;/span&gt;     &lt;span class=&quot;nv&quot;&gt;scope.letsAdd = &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;(x,y) -&amp;gt;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;17&lt;/span&gt;       &lt;span class=&quot;nx&quot;&gt;ctrl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;18&lt;/span&gt;     &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And let&amp;#39;s assume these two directives have simple &amp;quot;parent-child&amp;quot; relationship in HTML:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;directive-a&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;directive-b&amp;gt;&amp;lt;/directive-b&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/directive-a&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The issue comes in when we want to unit test directive B in isolation, without 
compiling directive A and everything that may come with it. 
If we try to test directive B just as a standalone directive, the compilation 
will fail as expected with the 
&lt;code&gt;Controller &amp;#39;directiveA&amp;#39;, required by directive &amp;#39;directiveB&amp;#39;, can&amp;#39;t be found!&lt;/code&gt;
error due to the &lt;code&gt;require: ^^directiveA&lt;/code&gt; property of the directive B.&lt;/p&gt;

&lt;p&gt;To eleminate this error and still unit test directive B in isolation, 
we need to mock the directive A controller and add it 
to the data store of some parent DOM element, e.g. &lt;code&gt;&amp;lt;fake-parent&amp;gt;&lt;/code&gt; (see below).
We don&amp;#39;t care what this parent is, as long as we can put a controller mock into
its data strore (via &lt;code&gt;.data&lt;/code&gt; method). &lt;/p&gt;

&lt;p&gt;Note, the naming convention for the controller key looked up by Angular is: &lt;/p&gt;

&lt;p&gt;&lt;code&gt;&amp;#39;$&amp;#39; + name of directive + &amp;#39;Controller&amp;#39;&lt;/code&gt;. &lt;/p&gt;

&lt;p&gt;Therefore, in order for Angular to find the mocked directive A controller
and have our test pass, we&amp;#39;d need to associate this mock 
with &lt;code&gt;$directiveAController&lt;/code&gt; key in the parent element data store:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-coffeescript&quot; data-lang=&quot;coffeescript&quot;&gt;&lt;span class=&quot;lineno&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;only&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;ensures letsAdd can add two numbers&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;-&amp;gt;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 2&lt;/span&gt;   &lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;directives.cdSlideviewer&amp;#39;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# this usually goes into beforeEach block&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 3&lt;/span&gt; 
&lt;span class=&quot;lineno&quot;&gt; 4&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# mock directive A controller and spy on &amp;#39;add&amp;#39; method&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 5&lt;/span&gt;   &lt;span class=&quot;nv&quot;&gt;directiveAControllerMock =&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 6&lt;/span&gt;     &lt;span class=&quot;nv&quot;&gt;add: &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;-&amp;gt;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 7&lt;/span&gt;       &lt;span class=&quot;mi&quot;&gt;123&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# you can return anything here, since we are not unit testing it&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 8&lt;/span&gt;   
&lt;span class=&quot;lineno&quot;&gt; 9&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# create Sinon spy&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;10&lt;/span&gt;   &lt;span class=&quot;nv&quot;&gt;mySpy = &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sinon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;spy&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;directiveAControllerMock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;add&amp;#39;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;11&lt;/span&gt; 
&lt;span class=&quot;lineno&quot;&gt;12&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# create angular element from HTML string&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;13&lt;/span&gt;   &lt;span class=&quot;nv&quot;&gt;elem = &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;angular&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;element&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;&amp;lt;fake-parent&amp;gt;&amp;lt;directive-b&amp;gt;&amp;lt;directive-b&amp;gt;&amp;lt;/fake-parent&amp;gt;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;14&lt;/span&gt;   
&lt;span class=&quot;lineno&quot;&gt;15&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# put controller mock into &amp;lt;fake-parent&amp;gt; data store&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;16&lt;/span&gt;   &lt;span class=&quot;nx&quot;&gt;elem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;$directiveAController&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;directiveAControllerMock&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;17&lt;/span&gt;   
&lt;span class=&quot;lineno&quot;&gt;18&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# compile element&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;19&lt;/span&gt;   &lt;span class=&quot;nx&quot;&gt;inject&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;($compile, $rootScope) -&amp;gt;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;20&lt;/span&gt;     &lt;span class=&quot;nx&quot;&gt;$compile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;elem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$rootScope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;21&lt;/span&gt;     &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;22&lt;/span&gt;   
&lt;span class=&quot;lineno&quot;&gt;23&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# retrieve directive B element and its scope&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;24&lt;/span&gt;   &lt;span class=&quot;nv&quot;&gt;elem = &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;elem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;directive-b&amp;#39;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;25&lt;/span&gt;   &lt;span class=&quot;nv&quot;&gt;scope = &lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;elem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;26&lt;/span&gt; 
&lt;span class=&quot;lineno&quot;&gt;27&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# call method under test&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;28&lt;/span&gt;   &lt;span class=&quot;nx&quot;&gt;scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;letsAdd&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; 
&lt;span class=&quot;lineno&quot;&gt;29&lt;/span&gt; 
&lt;span class=&quot;lineno&quot;&gt;30&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# assert that our spy was called with proper arguments&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;31&lt;/span&gt;   &lt;span class=&quot;nx&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mySpy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;have&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;been&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;calledWith&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;32&lt;/span&gt;   &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The directive A controller is found and the test happily passes. &lt;i class=&quot;fa fa-smile-o fa-lg&quot; style=&quot;color:green&quot;&gt; &lt;/i&gt;&lt;/p&gt;

&lt;p&gt;This was a contrived example inteded to demonstrate a high level approach on 
how one can remove a dependency on other directives during a unit test. Use
&lt;a href=&quot;http://js2coffee.org/&quot;&gt;js2coffe&lt;/a&gt; if you need to convert my examples written in 
CoffeeScript to vanilla JavaScript and then learn CoffeeScript.&lt;/p&gt;&lt;/p&gt;

&lt;p&gt;&lt;a class=&quot;twitter-follow-button&quot;
  href=&quot;https://twitter.com/demisx1&quot;
  data-show-count=&quot;false&quot;
  data-lang=&quot;en&quot;
  data-size=&quot;large&quot;&gt;
&lt;/a&gt; for more tips and best practices.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Today my environment was:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;CoffeeScript 1.8.0&lt;/li&gt;
&lt;li&gt;AngularJS 1.3.0&lt;/li&gt;
&lt;li&gt;Node.js 0.10.31&lt;/li&gt;
&lt;li&gt;Mocha 1.21.4 / Chai 1.9.2&lt;/li&gt;
&lt;/ul&gt;
</description>
                                <pubDate>Tue, 28 Oct 2014 17:45:00 -0400</pubDate>
                                <link>http://demisx.github.io//angularjs,/unit/testing/2014/10/28/unit-testing-angular-child-directive-that-requires-parent.html</link>
                                <guid isPermaLink="true">http://demisx.github.io//angularjs,/unit/testing/2014/10/28/unit-testing-angular-child-directive-that-requires-parent.html</guid>
                        </item>
                
                        <item>
                                <title>AngularJS 1.x WGW (What Goes Where) guide</title>
                                <description>&lt;p&gt;A few months ago, I finally had a chance to get my hands on the so-much-talked-about
&lt;a href=&quot;https://angularjs.org/&quot;&gt;AngularJS&lt;/a&gt; framework and I really digged it. In fact, 
I like it so much that I am 100% sure this framework will stay ahead of others 
for a long time. Well, in our world this means for at least another year or two.&lt;/p&gt;

&lt;p&gt;Though, I&amp;#39;ve got the basics down fairly fast, I had hard time around understanding
the proper code organization. Being a perfectionist didn&amp;#39;t help either. Coming from a very
opiniated Rails framework it didn&amp;#39;t feel comfortable at first that AngularJS gave
significantly more freedom to do things. But thank God the &amp;quot;Rails magic&amp;quot; is gone!&lt;/p&gt;

&lt;p&gt;The type of questions that kept poping up  in my head were: &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&amp;quot;OK, I want to code this functionality, but where shoud I really put it&amp;quot;? &lt;/li&gt;
&lt;li&gt;Should I stick this code into a View controller, or should I put it into a Service? &lt;/li&gt;
&lt;li&gt;Perhaps, a directive could be a good place for it, but then where exactly in a directive? &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Doing my googling I&amp;#39;ve realized there were plenty of other pilligrims like me 
trying to find their way in this new and exciting AngularJS world.&lt;/p&gt;

&lt;p&gt;So, I am putting together this cheatsheet hoping it will guide us on where the stuff 
should really go. It&amp;#39;s not meant to be detail, but it should give you the right
starting point depending on what you are trying to achieve.&lt;/p&gt;

&lt;div class=&quot;alert alert-warning&quot;&gt;
&lt;i class=&quot;fa fa-bell-o fa-2x&quot;&gt;&lt;/i&gt;
  *Please note, that I&#39;ve intentionally omitted the `Service` component from this list. 
  I find that using factories lets me accomplish everything I could do with 
  `Service`, therefore I really had no real need to engage the latter. `Service`
  component does have some limited benefits if you are using CoffeeScript classes, 
  but this would out of the scope of this post. Let&#39;s KISS (Keep It Simple Stupid).*
&lt;/div&gt;

&lt;style&gt;
  table#angular-table &gt; tbody &gt; tr &gt; td:nth-child(1) {
    width: 30%;
    padding-left: 20px;
  }
  table#angular-table &gt; tbody &gt; tr &gt; td:nth-child(1) &gt; ol {
    padding-left: 20px;
  }
  table#angular-table &gt; tbody &gt; tr &gt; td li {
    padding-bottom: 5px;
  }
  table#angular-table &gt; tbody &gt; tr &gt; td:nth-child(2),
  table#angular-table &gt; tbody &gt; tr &gt; td:nth-child(3) {
    font-weight: bold;
    text-align: center;
  }
&lt;/style&gt;

&lt;table id=&quot;angular-table&quot; class=&quot;table table-striped table-bordered&quot;&gt;
  &lt;tr&gt;
    &lt;th class=&quot;text-center&quot;&gt;Use case&lt;/th&gt;
    &lt;th class=&quot;text-center&quot;&gt;Component&lt;/th&gt;
    &lt;th class=&quot;text-center&quot;&gt;Sub-component&lt;/th&gt;
    &lt;th class=&quot;text-center&quot;&gt;Examples&lt;/th&gt;
    &lt;th class=&quot;text-center&quot;&gt;Notes&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;ol&gt;
        &lt;li&gt;
         Reusable application-wide business logic that &lt;u&gt;does&amp;nbsp;not&amp;nbsp;need&lt;/u&gt; 
         to be further configured in `module.config` phase
        &lt;/li&gt;
        &lt;li&gt;Shareable data&lt;/li&gt;
      &lt;/ol&gt;
    &lt;/td&gt;
    &lt;td&gt;Factory&lt;/td&gt;
    &lt;td&gt;&lt;/td&gt;
    &lt;td&gt;
      md5Service&lt;br/&gt;
      authService
    &lt;/td&gt;
    &lt;td&gt;
      These are generally refered to as `application services` or simply `services`.
      Do not confuse it with the name of AngularJS `Service` component that we&#39;ve 
      excluded from this post`.
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;ol&gt;
        &lt;li&gt;Reusable application business logic that &lt;u&gt;does&amp;nbsp;need&lt;/u&gt; to be 
        configured in `module.config` phase before it can be used&lt;/li&gt;
      &lt;/ol&gt;
    &lt;/td&gt;
    &lt;td&gt;Provider&lt;/td&gt;
    &lt;td&gt;&lt;/td&gt;
    &lt;td&gt;
      facebookLoginService&lt;br/&gt;
      geoService
    &lt;/td&gt;
    &lt;td&gt;Examples of such configurations may include setting Facebook application id or
        an API key for accessing geolocation service.
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;ol&gt;
        &lt;li&gt;Models that map to database tables&lt;/li&gt;
        &lt;li&gt;CRUD interaction with `RESTful` server-side data sources&lt;/li&gt;
        &lt;li&gt;Business logic &lt;u&gt;specific to the model&lt;/u&gt; &lt;/li&gt;
      &lt;/ol&gt;
    &lt;/td&gt;
    &lt;td&gt;Factory&lt;/td&gt;
    &lt;td&gt;$resource&lt;/td&gt;
    &lt;td&gt;
      User&lt;br/&gt;
      Session&lt;br/&gt;
      CreditCard&lt;/td&gt;
    &lt;td&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;ol&gt;
        &lt;li&gt;Wire up (e.g. initialize) scope with data and methods for views to use &lt;/li&gt;
      &lt;/ol&gt;
    &lt;/td&gt;
    &lt;td&gt;Controller&lt;/td&gt;
    &lt;td&gt;&lt;/td&gt;
    &lt;td&gt;
      DashboardController&lt;br/&gt;
      ProjectController&lt;br/&gt;
      SlideController
    &lt;/td&gt;
    &lt;td&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;ol&gt;
        &lt;li&gt;Manupulations of DOM template that you want all directive instances to inherit&lt;/li&gt;
      &lt;/ol&gt;
    &lt;/td&gt;
    &lt;td&gt;Directive&lt;/td&gt;
    &lt;td&gt;compile&lt;br/&gt; function&lt;/td&gt;
    &lt;td&gt;&lt;/td&gt;
    &lt;td&gt;Rarely used&lt;sup&gt;1&lt;/sup&gt;. Does not have access to scope.&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;ol&gt;
        &lt;li&gt;Manupulations of DOM instances in linked HTML&lt;/li&gt;
        &lt;li&gt;Addition of DOM event listeners&lt;/li&gt;
        &lt;li&gt;Directive specific scope watchers and/or attribute observers&lt;/li&gt;
      &lt;/ol&gt;
    &lt;/td&gt;
    &lt;td&gt;Directive&lt;/td&gt;
    &lt;td&gt;link&lt;br/&gt; function&lt;/td&gt;
    &lt;td&gt;&lt;/td&gt;
    &lt;td&gt;By link function I mean `post-link` function&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;ol&gt;
        &lt;li&gt;Business logic &lt;u&gt;specific to the directive&lt;/u&gt;&lt;/li&gt;
        &lt;li&gt;API methods for communicating between directives&lt;/li&gt;
      &lt;/ol&gt;
    &lt;/td&gt;
    &lt;td&gt;Directive&lt;/td&gt;
    &lt;td&gt;controller&lt;/td&gt;
    &lt;td&gt;&lt;/td&gt;
    &lt;td&gt;
      A directive wishing to access controller methods of another directive
      needs to explicitly require it
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;
    &lt;ol&gt;
      &lt;li&gt;Transform model data without changing the source data&lt;/li&gt;
      &lt;li&gt;Filter out ng-repeats based on a certain criteria&lt;/li&gt;
    &lt;/ol&gt;
    &lt;/td&gt;
    &lt;td&gt;Filter&lt;/td&gt;
    &lt;td&gt;&lt;/td&gt;
    &lt;td&gt;
      displayNameFilter&lt;br/&gt;
      startsWithFilter&lt;br/&gt;
      sortByFilter&lt;br/&gt;
      pluralizeFilter
    &lt;/td&gt;
    &lt;td&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;ol&gt;
        &lt;li&gt;Editable application-wide settings&lt;/li&gt;
        &lt;li&gt;Editable application-wide value objects or primitives 
            that controller or service components need access to. 
        &lt;/li&gt;
      &lt;/ol&gt;
    &lt;/td&gt;
    &lt;td&gt;Value&lt;/td&gt;
    &lt;td&gt;&lt;/td&gt;
    &lt;td&gt;
      uiConfig&lt;br/&gt;
      currentUser&lt;/td&gt;
    &lt;td&gt;&lt;u&gt;Cannot be&lt;/u&gt; injected into the 
      `module.config` phase, but can be altered by a `Decorator`.
    Examples could include an object that tracks currently logged in user 
    properties or any other object, properties of which you want to access in
    various parts of your application&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;ol&gt;
        &lt;li&gt;Constant application-wide settings&lt;/li&gt;
      &lt;/ol&gt;
    &lt;/td&gt;
    &lt;td&gt;Constant&lt;/td&gt;
    &lt;td&gt;&lt;/td&gt;
    &lt;td&gt;
      FACEBOOK_ACCOUNT&lt;br/&gt;
      AUTH_EVENTS
    &lt;/td&gt;
    &lt;td&gt;Besides controller and a service, Constant &lt;u&gt;can also be injected&lt;/u&gt; 
        into the `module.config` phase. Constants cannot be altered by a 
        `Decorator`. Avoid modifying the Constant. If you need an editable object
        or value, use `Value` component/provider instead.
    &lt;/td&gt;
  &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td&gt;
      &lt;ol&gt;
        &lt;li&gt;Augment/tweak some-third party service, while leaving the service mostly intact&lt;/li&gt;
        &lt;li&gt;Initialize a value in a `Value` component where such initialization 
            requires access to a factory service&lt;/li&gt;
      &lt;/ol&gt;
    &lt;/td&gt;
    &lt;td&gt;Decorator&lt;/td&gt;
    &lt;td&gt;&lt;/td&gt;
    &lt;td&gt;myLog&lt;/td&gt;
    &lt;td&gt;
      If you simply want to replace an instance, then using `Factory` or `Value`
      component is musch simpler
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;hr&gt;

&lt;p&gt;&lt;sup&gt;1&lt;/sup&gt; See &lt;a href=&quot;http://stackoverflow.com/questions/13852248/how-to-write-a-double-and-a-ntimes-directive-for-angularjs/13873098#13873098&quot;&gt;example&lt;/a&gt;
of how a compile function can be used.&lt;/p&gt;

&lt;p&gt;&lt;a class=&quot;twitter-follow-button&quot;
  href=&quot;https://twitter.com/demisx1&quot;
  data-show-count=&quot;false&quot;
  data-lang=&quot;en&quot;
  data-size=&quot;large&quot;&gt;
&lt;/a&gt; for more tips and best practices.&lt;/p&gt;
</description>
                                <pubDate>Sun, 14 Sep 2014 02:45:00 -0400</pubDate>
                                <link>http://demisx.github.io//angularjs/2014/09/14/angular-what-goes-where.html</link>
                                <guid isPermaLink="true">http://demisx.github.io//angularjs/2014/09/14/angular-what-goes-where.html</guid>
                        </item>
                
                        <item>
                                <title>Basic authentication with Rails Admin without Devise</title>
                                <description>&lt;p&gt;&lt;a href=&quot;https://github.com/sferik/rails_admin&quot;&gt;RailsAdmin&lt;/a&gt; is a very nice simple gem
that allows you to manage data in models via a simple to use GUI. By default, it
comes without any authentication enabled, so anyone can access the &lt;code&gt;/admin&lt;/code&gt; URL.
It does allow you to integrate with popular authentication frameworks, though,
like devise and CanCan, however, I find it to be an overkill in small simple 
projects. In case of the latter, I simply opt in for basic authentication over
HTTPS.&lt;/p&gt;

&lt;p&gt;Here is what needs to be done to enable basic authentication for RailsAdmin:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Step 1.&lt;/strong&gt; Add user and password you wish to protect access with: &lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# in config/secrets.yml&lt;/span&gt;
&lt;span class=&quot;ss&quot;&gt;development&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;radmin&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;my_dev_password&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;ss&quot;&gt;production&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;radmin&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;myProdPassword&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Step 2.&lt;/strong&gt; Add these lines to RA initializer: &lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# in config/initializers/reails_admin.rb&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;authorize_with&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;authenticate_or_request_with_http_basic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Login required&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;username&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;secrets&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; 
      &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;secrets&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Step 3.&lt;/strong&gt; Restart&lt;/p&gt;

&lt;p&gt;Now, restart your rails app server and try to access the RailsAdmin URL (e.g. &lt;code&gt;/admin&lt;/code&gt;).
It should prompt for a user name and password.&lt;/p&gt;

&lt;hr&gt;

&lt;h5 id=&quot;today-my-environment-was:&quot;&gt;Today my environment was:&lt;/h5&gt;

&lt;ul&gt;
&lt;li&gt;Rails 4.1.0.rc2&lt;/li&gt;
&lt;li&gt;Rails Admin 0.6.1&lt;/li&gt;
&lt;/ul&gt;
</description>
                                <pubDate>Wed, 07 May 2014 08:19:12 -0400</pubDate>
                                <link>http://demisx.github.io//rails-admin/2014/05/07/authentication-rails-admin-without-devise.html</link>
                                <guid isPermaLink="true">http://demisx.github.io//rails-admin/2014/05/07/authentication-rails-admin-without-devise.html</guid>
                        </item>
                
                        <item>
                                <title>How to have Rails auto reload classes in custom directories under app/</title>
                                <description>&lt;p&gt;Over time, your rails models go from being a super model to being fat and eventually end up
obese waiting any time for a heart attack to choke your app. When refactoring such models, I really
like and follow the approach described by Code Climate in &lt;a href=&quot;http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/&quot;&gt;7 Patterns to Refactor Fat ActiveRecord Models&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Leveraging their technique, I create this directory structure for the new objects:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;app/
----------
  |___controllers/ -&amp;gt; rails default dir to store controller classes
  |___models/      -&amp;gt; rails default dir to store models classes
  |___views/       -&amp;gt; rails default dir to store views classes
  |___... ... ...
  |___decorators/  -&amp;gt; custom dir to store decorator objects
  |___policies/    -&amp;gt; custom dir to store policy objects
  |___presenters/  -&amp;gt; custom dir to store presenter objects
  |___services/    -&amp;gt; custom dir to store service objects
  |___validators/  -&amp;gt; custom dir to store validator objects
  |___... ... ...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;and then name space my new objects as I believe it leads to better code organization and 
avoids potential name collisions in the future:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;lineno&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# Example of a service object in &amp;quot;app/services/doctor_finder.rb&amp;quot; directory&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Services&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;3&lt;/span&gt;   &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DoctorFinder&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;4&lt;/span&gt;     &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;find_doctors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;distance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Settings&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;finder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;default_distance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;5&lt;/span&gt;       &lt;span class=&quot;no&quot;&gt;Doctor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;near&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;distance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Settings&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;finder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_results_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;6&lt;/span&gt;     &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;7&lt;/span&gt;   &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The issue with this approach (Rails 4 at the time of writing) that these classes/objects in custom 
diretories will not be auto reloaded in development environment with default rails config. In fact,
if name spaced, these classes will throw &lt;code&gt;Uninitialized constant [your_calling_class]::Services&lt;/code&gt; 
type of exception, because Rails will not know how to resolve your new name spaced constants. 
To resolve this issue and make sure that your classes auto reload, you need to do two things:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Update &lt;em&gt;config/application.rb&lt;/em&gt; file to add &amp;quot;app/&amp;quot; directory to the auto load paths: 
&lt;code&gt;config.autoload_paths += %W(#{config.root}/app)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Make sure you don&amp;#39;t manually require your new classes anywhere in the code. Let Rails magic 
do that for you.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;That&amp;#39;s all. Your new classes should auto reload now similar to rails default controllers, models, 
views etc. &lt;/p&gt;

&lt;p&gt;Special &amp;#39;thank you&amp;#39; to the awesome rails team @fxn, @jeremy, @thedarkone and all others who helped me with 
resolving this issue &lt;a href=&quot;https://github.com/rails/rails/issues/14382&quot;&gt;Classes not reloaded...&lt;/a&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h5 id=&quot;today-my-environment-was:&quot;&gt;Today my environment was:&lt;/h5&gt;

&lt;ul&gt;
&lt;li&gt;Rails 4.1.0.rc1&lt;/li&gt;
&lt;/ul&gt;
</description>
                                <pubDate>Sun, 16 Mar 2014 13:13:12 -0400</pubDate>
                                <link>http://demisx.github.io//rails/2014/03/16/auto-reload-classes-custom-directories.html</link>
                                <guid isPermaLink="true">http://demisx.github.io//rails/2014/03/16/auto-reload-classes-custom-directories.html</guid>
                        </item>
                
                        <item>
                                <title>Where to store Rails project support files</title>
                                <description>&lt;p&gt;When we generate a new Rails project, it spits out at us a nice well thought-out folder structure 
with a particular place for each code component should go to. App code goes into &lt;code&gt;/app&lt;/code&gt; folder, 
configurations into &lt;code&gt;/config&lt;/code&gt;, log files int &lt;code&gt;/log&lt;/code&gt; and so forth. We love it and it works great 
until you come across a situation when you&amp;#39;ve got other files that you also need to 
associate with the project, but your generated rails app doesn&amp;#39;t seem to have a folder for. &lt;/p&gt;

&lt;p&gt;Example of such files (let&amp;#39;s call them &amp;quot;support files&amp;quot; for brevity) could be:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;UX designs&lt;/li&gt;
&lt;li&gt;Support documentation to be distributed to the client&lt;/li&gt;
&lt;li&gt;Guidelines docs for the project team&lt;/li&gt;
&lt;li&gt;Creative source files (PSD, AI, INDD etc.)&lt;/li&gt;
&lt;li&gt;... ... ...&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;One option would be to place all these support files into a separate from Rails app project folder 
and commit them to version control (VC). While this may work for some teams on some type of projects, it 
didn&amp;#39;t really work well for us, due to the fact that we use a workflow that requires a new branch for
each new change/feature request and each such change usually requires modification to the Rails app 
project code as well as modifications to some other support files. Since we use one single feature branch 
for each change--keeping support files in a separate from Rails app location sooner or later 
(rather sooner) leads to a situation when someone forgets to create a new branch for the support files,
creates it incorrectly, or forget to commit it. This leads to support files fall out of sync with 
the main Rails app project. Bad!&lt;/p&gt;

&lt;p&gt;What worked well for us is to bring all support files, let&amp;#39;s call them resources, under the Rails 
app umbrella. This way user story related changes gets branched and merged at the same time. &lt;/p&gt;

&lt;p&gt;We usually add new &lt;code&gt;resources&lt;/code&gt; directory and group files like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;Rails_app/
----------
  |___app/
  |___bin/
  |___config
  |___... ... ...
  |___resources/
        |___/creative = all creative resources for the site (i.e. PSDs, AIs, PNGs, etc.)
        |___/docs     = all documentation related to the project   
        |___/ux       = UX designs and US related stuff
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Branch and merge everything atomically now. Nothing falls behind. &lt;/p&gt;

&lt;div class=&quot;alert alert-warning&quot;&gt;
&lt;i class=&quot;fa fa-lightbulb-o fa-2x&quot;&gt;&lt;/i&gt;
If your team is rather large and
not collocated, self-organized, you may want to consider limiting access for different teams to 
different folders withing the `Rails_app/` folder. So, for example, railers would have access to Rails app 
code, creative designers to `resources/creative/*`, UX designers to `resources/ux/*` and so forth. 
&lt;/div&gt;

&lt;p&gt;Would be interesting to hear what strategy worked for your teams. Please share in the comments below.&lt;/p&gt;

&lt;hr&gt;

&lt;h5 id=&quot;today-my-environment-was:&quot;&gt;Today my environment was:&lt;/h5&gt;

&lt;ul&gt;
&lt;li&gt;Rails 4.1.0.rc1&lt;/li&gt;
&lt;/ul&gt;
</description>
                                <pubDate>Sun, 02 Mar 2014 07:26:12 -0500</pubDate>
                                <link>http://demisx.github.io//rails/2014/03/02/where-store-additional-rails-project-files.html</link>
                                <guid isPermaLink="true">http://demisx.github.io//rails/2014/03/02/where-store-additional-rails-project-files.html</guid>
                        </item>
                
                        <item>
                                <title>How to Configure CORS Accept Headers in Rails API Application</title>
                                <description>&lt;p&gt;You&amp;#39;ve finally realized the value of SOA 
(&lt;a href=&quot;http://en.wikipedia.org/wiki/Service-oriented_architecture&quot;&gt;Service Oriented Architecturee&lt;/a&gt;) 
and decided to move all of your dynamic functionality into an independent service layer. Smart!&lt;/p&gt;

&lt;p&gt;You start turning your cool dynamic features into REST JSON web services and then have your HTML 
sites (a.k.a consumer) query these services for JSON data (a.k.a. provider). However, the response from 
your web service is coming back blank, though the HTTP response status says 200 OK and
you can see JSON data when accessing the web service endpoint directly. Sounds familiar?&lt;/p&gt;

&lt;p&gt;What you may be dealing with here is known as a 
&lt;a href=&quot;http://en.wikipedia.org/wiki/Cross-origin_resource_sharing&quot;&gt;Cross-origin Resource Sharing (CORS)&lt;/a&gt; 
and covers situations where a web service you are querying is on a different site compared to the one 
initiating the request. Browsers ban such requests trying to comply with so-called
&amp;quot;&lt;a href=&quot;http://en.wikipedia.org/wiki/Same_origin_policy&quot;&gt;Same Origin Security Policy&lt;/a&gt;&amp;quot;.&lt;/p&gt;

&lt;p&gt;Here, it is important to understand what a site is in this particular context:&lt;/p&gt;

&lt;div class=&quot;alert alert-warning&quot;&gt;
&lt;i class=&quot;fa fa-lightbulb-o fa-2x&quot;&gt;&lt;/i&gt; &quot;Site&quot; is a combination of scheme, hostname, and port number.
&lt;/div&gt;

&lt;p&gt;So, even if your consumer is on &amp;quot;localhost:3000&amp;quot; and your provider is on &amp;quot;localhost:3001&amp;quot;, the response
will be neglected unless your web service sets a permissive CORS policy. This policy is 
defined by the provider setting specific CORS headers in HTTP response that a consumer app 
(e.g. a browser) destined to enforce. For example, configuring these headers:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# in config/application.rb &lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;action_dispatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;default_headers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;&amp;#39;Access-Control-Allow-Origin&amp;#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;http://my-web-service-consumer-site.com&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;&amp;#39;Access-Control-Request-Method&amp;#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%w{GET POST OPTIONS}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;,&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


will allow a web service to service `GET | POST | OPTIONS` requests from your 
`http://my-web-service-consumer-site.com` site.

&lt;div class=&quot;alert alert-danger&quot;&gt;
  &lt;i class=&quot;fa fa-exclamation-circle fa-2x&quot;&gt;&lt;/i&gt;   Please note, that setting 
  &#39;Access-Control-Allow-Origin&#39; =&gt; &#39;*&#39; is highly discouraged, unless you
  are providing a public API that is intended to be accessed by any consumer out there.
&lt;/div&gt;

&lt;p&gt;If you want to allow multiple sites to access your web service, the recommended way is to have your 
server read the Origin header from the consumer, compare that to the list of sites you&amp;#39;d like to allow, 
and, if it matches, send the value of the Origin header back to the consumer as the 
&lt;code&gt;Access-Control-Allow-Origin&lt;/code&gt; header in the response. Simply listing multiple sites or adding multiple
&lt;code&gt;Access-Control-Allow-Origin&lt;/code&gt; headers in the response doesn&amp;#39;t appear to produce consistent results
accross different browsers.&lt;/p&gt;

&lt;p&gt;For those, who prefer to define CORS policy via Rack middleware, take a look at this 
rails-cors (&lt;a href=&quot;https://github.com/cyu/rack-cors&quot;&gt;https://github.com/cyu/rack-cors&lt;/a&gt;) gem.&lt;/p&gt;

&lt;hr&gt;

&lt;h5 id=&quot;today-my-environment-was:&quot;&gt;Today my environment was:&lt;/h5&gt;

&lt;ul&gt;
&lt;li&gt;Rails 4.0.2&lt;/li&gt;
&lt;li&gt;rails-api 0.2.0&lt;/li&gt;
&lt;/ul&gt;
</description>
                                <pubDate>Tue, 18 Feb 2014 05:41:12 -0500</pubDate>
                                <link>http://demisx.github.io//rails-api/2014/02/18/configure-accept-headers-cors.html</link>
                                <guid isPermaLink="true">http://demisx.github.io//rails-api/2014/02/18/configure-accept-headers-cors.html</guid>
                        </item>
                
                        <item>
                                <title>How to Compile Tomcat mod_jk connector on Mac OS X Mavericks</title>
                                <description>&lt;p&gt;In my ongoing quest of porting apps from Windows to Mac OS X environment, I had to install Tomcat&amp;#39;s &lt;a href=&quot;http://tomcat.apache.org/download-connectors.cgi&quot;&gt;mod_jk 
connector&lt;/a&gt; to proxy requests from Apache to 
JBoss application server. This is not my favorite setup, of course, but rather a legacy environment 
for one of the clients. Everything was going smoothly until mod_jk compilation part. After doing
some research and reading some blogs, here is these are the steps that finally worked for me:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Download the latest JK connector (1.2.37 at time of writing) for Mac OS X
from &lt;a href=&quot;http://tomcat.apache.org/download-connectors.cgi&quot;&gt;Apache Tomcat Download&lt;/a&gt; page.&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Configure/make/install (if you didn&amp;#39;t install Apache via Homebrew and/or the path to 
&lt;code&gt;apxs&lt;/code&gt; differs--adjust accordingly). 
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;go&quot;&gt;[dmoore]$ cd tomcat-connectors-1.2.37-src/native&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;[dmoore]$ ./configure CFLAGS=&amp;#39;-arch x86_64&amp;#39; APXSLDFLAGS=&amp;#39;-arch x86_64&amp;#39; --with-apxs=/usr/local/sbin/apxs&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;[dmoore]$ make &lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;[dmoore]$ make install&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Create directory for storing shared memory file, if missing. 
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;go&quot;&gt;mkdir /usr/local/Cellar/httpd/2.2.26/run&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;And you are done! The &lt;code&gt;mod_jk.so&lt;/code&gt; module should be in Apache folder (in my case the path is
&lt;code&gt;/usr/local/Cellar/httpd/2.2.26/libexec/&lt;/code&gt;, since Apache 2 has been installed via Homebrew)&lt;/p&gt;

&lt;h3 id=&quot;resolving-&amp;quot;abort-trap:-6&amp;quot;-error-during-apache-start&quot;&gt;Resolving &amp;quot;Abort trap: 6&amp;quot; Error During Apache Start&lt;/h3&gt;

&lt;p&gt;If after following the steps above, you are running into &amp;quot;Abort trap: 6&amp;quot; error upon starting 
Apache server, this may be due to the current buffer overlap bug in the connector. It still hasn&amp;#39;t been 
fixed in the latest version of the connector, so you&amp;#39;d need to manually patch it and recompile. 
I&amp;#39;ve read about this fix on 
&lt;a href=&quot;http://pablotips.blogspot.com/2013/12/compiling-modjk-on-mavericks.html&quot;&gt;this blog&lt;/a&gt; and was able
to successfully implement it on my end. &lt;/p&gt;

&lt;p&gt;Follow these steps to patch this bug:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Open &lt;code&gt;tomcat-connectors-1.2.37-src/native/common/jk_map.c&lt;/code&gt; and locate this block 
of code 
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c#&quot; data-lang=&quot;c#&quot;&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;jk_map_get_int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jk_map_t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&lt;em&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&lt;/em&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;def&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;int_res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multit&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;n&quot;&gt;sprintf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;%d&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;def&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jk_map_get_string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Replace it with the following snippet: 
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c#&quot; data-lang=&quot;c#&quot;&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;jk_map_get_int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jk_map_t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&lt;em&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&lt;/em&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;def&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buf2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;int_res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multit&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;n&quot;&gt;sprintf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buf2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;%d&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;def&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jk_map_get_string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buf2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Configure/make/install again following original step 2 at the beginning of this post. 
The error should be gone now.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Hope this saves someone some wasted time.&lt;/p&gt;

&lt;hr&gt;

&lt;h5 id=&quot;today-my-environment-was:&quot;&gt;Today my environment was:&lt;/h5&gt;

&lt;ul&gt;
&lt;li&gt;Mac OS X Mavericks 10.9.1&lt;/li&gt;
&lt;li&gt;Homebrew 0.9.5&lt;/li&gt;
&lt;li&gt;Apache/2.2.26 (Unix) via Homebrew&lt;/li&gt;
&lt;li&gt;Tomcat connector 1.2.37&lt;/li&gt;
&lt;/ul&gt;
</description>
                                <pubDate>Thu, 06 Feb 2014 03:46:12 -0500</pubDate>
                                <link>http://demisx.github.io//tomcat/connector/2014/02/06/install-mod_jk-mac-os-x.html</link>
                                <guid isPermaLink="true">http://demisx.github.io//tomcat/connector/2014/02/06/install-mod_jk-mac-os-x.html</guid>
                        </item>
                
                        <item>
                                <title>How to Install PostgreSQL 9 DB on Mac OS X Mavericks with Homebrew</title>
                                <description>&lt;p&gt;Just moved from MySQL to PostgreSQL for the new rails apps. I think it is time I try
something new after being so faithful to MySQL DB for the past X years. My first PostgreSQL
install didn&amp;#39;t go as smooth as I expected, but wasn&amp;#39;t too bad. Here is a summary of the installation
steps that worked for me (assuming you are using the awesome &lt;a href=&quot;http://brew.sh/&quot;&gt;Homebrew&lt;/a&gt; package 
manager).&lt;/p&gt;

&lt;h3 id=&quot;uninstall-previous-version-of-postgresql-(if-any)&quot;&gt;Uninstall Previous Version of PostgreSQL (if any)&lt;/h3&gt;

&lt;p&gt;If you&amp;#39;d like to do a fresh re-install of PostgreSQL DB existing version can be uninstalled this way.
&lt;div class=&quot;alert alert-danger&quot;&gt;&lt;i class=&quot;fa fa-exclamation-circle fa-2x&quot;&gt;&lt;/i&gt; Make sure to export all of your data from the existing database prior
to executing steps below or it will be deleted!&lt;/div&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; Stop current DB server &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; running
&lt;span class=&quot;go&quot;&gt;[dmoore]$ launchctl unload -w ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist&lt;/span&gt;

&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; Ensure there are no PostgreSQL processes running. Quit whatever is running
&lt;span class=&quot;go&quot;&gt;[dmoore]$ ps -ef | grep postgres | grep -v &amp;quot;grep postgres&amp;quot;&lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;501&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;39289&lt;/span&gt;     &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;   &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;  8:47PM ??         0:00.01 postgres: dmoore beotracker_development &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;local&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; idle 
&lt;span class=&quot;go&quot;&gt;[dmoore]$ kill -QUIT 39289&lt;/span&gt;

&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; Remove current package
&lt;span class=&quot;go&quot;&gt;[dmoore]$ brew rm postgresql --force&lt;/span&gt;

&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; These files may need to be deleted manually, &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; present
&lt;span class=&quot;go&quot;&gt;[dmoore]$ rm -fr /usr/local/var/postgres&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;[dmoore]$ rm ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;[dmoore]$ rm /Library/Caches/Homebrew/Formula/postgresql.brewing&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;install-postgresql-db-with-homebrew&quot;&gt;Install PostgreSQL DB with Homebrew&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; ensure there are no errors with your existing packages
&lt;span class=&quot;go&quot;&gt;[dmoore]$ brew doctor &lt;/span&gt;

&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; update latest formulaes
&lt;span class=&quot;go&quot;&gt;[dmoore]$ brew update&lt;/span&gt;

&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; Install DB server
&lt;span class=&quot;go&quot;&gt;[dmoore]$ brew install postgresql&lt;/span&gt;

&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; Enable server to auto start at boot
&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Make sure to update &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;9.3.2&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt; in the path below to match your PostgreSQL version, &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; different&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;[dmoore]$ cp /usr/local/Cellar/postgresql/9.3.2/homebrew.mxcl.postgresql.plist ~/Library/LaunchAgents/&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;At this point the PostgreSQL DB server is installed and ready to start. Config file is located
at &lt;code&gt;/usr/local/var/postgres/postgresql.conf&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; Start server
&lt;span class=&quot;go&quot;&gt;[dmoore]$ launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; Stop server
&lt;span class=&quot;go&quot;&gt;[dmoore]$ launchctl unload -w ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;managing-postgresql-with-lunchy-gem&quot;&gt;Managing PostgreSQL with Lunchy Gem&lt;/h3&gt;

&lt;p&gt;I recommend installing this gem to simplify starting and stopping PostgreSQL server:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;go&quot;&gt;[dmoore]$ gem install lunchy&lt;/span&gt;

&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; Start server
&lt;span class=&quot;go&quot;&gt;[dmoore]$ lunchy start postgres&lt;/span&gt;

&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; Stop server
&lt;span class=&quot;go&quot;&gt;[dmoore]$ lunchy stop postgres&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;testing-postgresql-installation&quot;&gt;Testing PostgreSQL Installation&lt;/h3&gt;

&lt;p&gt;Make sure the server is running, then execute commands below. You should see:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;which&lt;/code&gt; returning Homebrew&amp;#39;s version of &lt;code&gt;psql&lt;/code&gt; file located at &lt;code&gt;/usr/local/bin/psql&lt;/code&gt;; and &lt;/li&gt;
&lt;li&gt;&lt;code&gt;\l&lt;/code&gt; reporting &lt;code&gt;postgres&lt;/code&gt; db with user (or &amp;quot;role&amp;quot; as postgres calls it) being set to your current 
shell user (e.g. &amp;quot;dmoore&amp;quot; in my case).&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;go&quot;&gt;[dmoore]$ which psql&lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; /usr/local/bin/psql

&lt;span class=&quot;go&quot;&gt;[dmoore]$ psql postgres&lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; psql &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;9.3.2&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; Type &lt;span class=&quot;s2&quot;&gt;&amp;quot;help&amp;quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; help.

&lt;span class=&quot;go&quot;&gt;postgres=# \l&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;                               List of databases&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;   Name    | Owner  | Encoding |   Collate   |    Ctype    | Access privileges &lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;-----------+--------+----------+-------------+-------------+-------------------&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; postgres  | dmoore | UTF8     | en_US.UTF-8 | en_US.UTF-8 | &lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; template0 | dmoore | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/dmoore        +&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;           |        |          |             |             | dmoore=CTc/dmoore&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; template1 | dmoore | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/dmoore        +&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;           |        |          |             |             | dmoore=CTc/dmoore&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Hopefully, you see what I see.&lt;/p&gt;

&lt;hr&gt;

&lt;h5 id=&quot;today-my-environment-was:&quot;&gt;Today my environment was:&lt;/h5&gt;

&lt;ul&gt;
&lt;li&gt;Mac OS X Mavericks 10.9.1&lt;/li&gt;
&lt;li&gt;Homebrew 0.9.5&lt;/li&gt;
&lt;li&gt;PostgreSQL 9.2.3e&lt;/li&gt;
&lt;/ul&gt;
</description>
                                <pubDate>Thu, 16 Jan 2014 12:52:12 -0500</pubDate>
                                <link>http://demisx.github.io//ruby-on-rails/2014/01/16/install-postgresql-mac-os-x-homebrew.html</link>
                                <guid isPermaLink="true">http://demisx.github.io//ruby-on-rails/2014/01/16/install-postgresql-mac-os-x-homebrew.html</guid>
                        </item>
                
                        <item>
                                <title>Error: Unable to Find Matching Line from Backtrace</title>
                                <description>&lt;p&gt;You&amp;#39;ve just upgraded to Ruby 2.1 and Ruby is hitting you back with this error?&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;Failure/Error: Unable to find matching line from backtrace
ArgumentError:
comparison of NilClass with 0 failed
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You are not alone. &lt;i class=&quot;fa fa-smile-o fa-lg&quot;&gt; &lt;/i&gt;&lt;/p&gt;

&lt;p&gt;Looks like the &lt;a href=&quot;http://ruby-doc.org/core-2.1.0/GC.html&quot;&gt;GC module&lt;/a&gt; has been updated in Ruby MRI 2.1
and returning different hash keys now. In my case, this is what caused this error in RSpec 
&lt;code&gt;spec/spec_helper.rb&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;lineno&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;after&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;2&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;slots_number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;slots_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;GC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:heap_live_num&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Since, there is no longer &lt;code&gt;:heap_live_num&lt;/code&gt; hash key returned by Ruby 2.1 &lt;code&gt;GC.stat&lt;/code&gt; method, &lt;code&gt;.max&lt;/code&gt; 
method throws an argument error while trying to compare against &lt;code&gt;nil&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The fix was to replace the outdated &lt;code&gt;:heap_live_num&lt;/code&gt; key with the new &lt;code&gt;:heap_live_slot&lt;/code&gt; one:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;lineno&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;after&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;2&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;slots_number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;slots_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;GC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:heap_live_slot&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And we are back in green land now. &lt;i class=&quot;fa fa-thumbs-o-up fa-lg&quot;&gt; &lt;/i&gt;&lt;/p&gt;

&lt;p&gt;So, check to see whether you are referencing the &lt;a href=&quot;http://ruby-doc.org/core-2.1.0/GC.html#method-c-stat&quot;&gt;latest hash keys&lt;/a&gt; 
of the &lt;code&gt;GC.stat&lt;/code&gt; hash.&lt;/p&gt;

&lt;hr&gt;

&lt;h5 id=&quot;today-my-environment-was:&quot;&gt;Today my environment was:&lt;/h5&gt;

&lt;ul&gt;
&lt;li&gt;Rails 4.0.2&lt;/li&gt;
&lt;li&gt;MRI Ruby 2.1.0&lt;/li&gt;
&lt;li&gt;Rspec-rails 2.14.1 &lt;/li&gt;
&lt;/ul&gt;
</description>
                                <pubDate>Wed, 15 Jan 2014 04:51:12 -0500</pubDate>
                                <link>http://demisx.github.io//ruby-on-rails/2014/01/15/unable-find-matching-line-from-backtrace.html</link>
                                <guid isPermaLink="true">http://demisx.github.io//ruby-on-rails/2014/01/15/unable-find-matching-line-from-backtrace.html</guid>
                        </item>
                
                        <item>
                                <title>Activate Hirb Formatted Output in Pry-enabled Rails Console</title>
                                <description>&lt;p&gt;So, you&amp;#39;ve finally found some free time to replace your default Rails console with &lt;a href=&quot;https://github.com/pry/pry&quot;&gt;Pry&lt;/a&gt; 
and now you want to see nice &lt;a href=&quot;https://github.com/cldwalker/hirb&quot;&gt;Hirb&lt;/a&gt; formatted output 
instead of the default IRB one? I hear you. To achieve that just add the following lines to your local &lt;code&gt;~/.pryrc&lt;/code&gt; file 
(e.g. /home/dmoore/.pryrc)&lt;/p&gt;

&lt;p&gt;&lt;script src=&quot;https://gist.github.com/8320981.js&quot;&gt; &lt;/script&gt;&lt;/p&gt;

&lt;p&gt;and start (or restart if you already have it running) the Rails console. You should be all set now.&lt;/p&gt;

&lt;p&gt;For exmaple, Here is how Hirb formats the output of your Rails model rows:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;go&quot;&gt;[dmoore]$ cd &amp;lt;path_to_my_rails_app&amp;gt;&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;[dmoore]$ rails c&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;Loading development environment (Rails 4.0.2)&lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;#&lt;/span&gt; Graduate is a model class and descendant of ActiveRecord::Base
&lt;span class=&quot;go&quot;&gt;[1] pry(main)&amp;gt; Graduate.all &lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  Graduate Load (28.2ms)  SELECT `graduates`.* FROM `graduates`&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;+----+----------------+-------------------------+-------------------------+&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;| id | workflow_state | created_at              | updated_at              |&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;+----+----------------+-------------------------+-------------------------+&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;| 1  | initiated      | 2014-01-06 18:13:02 UTC | 2014-01-06 18:13:02 UTC |&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;| 2  | initiated      | 2014-01-06 23:31:02 UTC | 2014-01-06 23:31:02 UTC |&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;| 3  | initiated      | 2014-01-06 23:36:51 UTC | 2014-01-06 23:36:51 UTC |&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;+----+----------------+-------------------------+-------------------------+&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;3 rows in set&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;To switch back and forth between the default IRB-foratted output and Hirb-formatted output in Rails
console use &lt;code&gt;Hirb.disable&lt;/code&gt; | &lt;code&gt;Hirb.enable&lt;/code&gt; commands respectively:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;go&quot;&gt;[2] pry(main)&amp;gt; Hirb.disable&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;=&amp;gt; false&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;[3] pry(main)&amp;gt; Graduate.all&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  Graduate Load (0.5ms)  SELECT `graduates`.* FROM `graduates`&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;=&amp;gt; [#&amp;lt;Graduate id: 1, workflow_state: &amp;quot;initiated&amp;quot;, created_at: &amp;quot;2014-01-06 18:13:02&amp;quot;, updated_at: &amp;quot;2014-01-06 18:13:02&amp;quot;&amp;gt;,&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; #&amp;lt;Graduate id: 2, workflow_state: &amp;quot;initiated&amp;quot;, created_at: &amp;quot;2014-01-06 23:31:02&amp;quot;, updated_at: &amp;quot;2014-01-06 23:31:02&amp;quot;&amp;gt;,&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; #&amp;lt;Graduate id: 3, workflow_state: &amp;quot;initiated&amp;quot;, created_at: &amp;quot;2014-01-06 23:36:51&amp;quot;, updated_at: &amp;quot;2014-01-06 23:36:51&amp;quot;&amp;gt;]&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;[4] pry(main)&amp;gt; Hirb.enable&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;=&amp;gt; true&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;[5] pry(main)&amp;gt; Graduate.all&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  Graduate Load (0.5ms)  SELECT `graduates`.* FROM `graduates`&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;+----+----------------+-------------------------+-------------------------+&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;| id | workflow_state | created_at              | updated_at              |&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;+----+----------------+-------------------------+-------------------------+&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;| 1  | initiated      | 2014-01-06 18:13:02 UTC | 2014-01-06 18:13:02 UTC |&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;| 2  | initiated      | 2014-01-06 23:31:02 UTC | 2014-01-06 23:31:02 UTC |&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;| 3  | initiated      | 2014-01-06 23:36:51 UTC | 2014-01-06 23:36:51 UTC |&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;+----+----------------+-------------------------+-------------------------+&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;3 rows in set&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;[6] pry(main)&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;hr&gt;

&lt;h5 id=&quot;today-my-environment-was:&quot;&gt;Today my environment was:&lt;/h5&gt;

&lt;ul&gt;
&lt;li&gt;Rails 4.0.2 pry-enabled console&lt;/li&gt;
&lt;li&gt;Pry version 0.9.12.4 &lt;/li&gt;
&lt;li&gt;Ruby MRI 2.1.0.&lt;/li&gt;
&lt;/ul&gt;
</description>
                                <pubDate>Tue, 14 Jan 2014 07:46:12 -0500</pubDate>
                                <link>http://demisx.github.io//ruby-on-rails/2014/01/14/activate-hirb-output-in-rails-pry-console.html</link>
                                <guid isPermaLink="true">http://demisx.github.io//ruby-on-rails/2014/01/14/activate-hirb-output-in-rails-pry-console.html</guid>
                        </item>
                
                        <item>
                                <title>Improve Code Highlighting in a Jekyll-based Blog Site</title>
                                <description>&lt;p&gt;If you don&amp;#39;t mind getting your hands on &amp;quot;HTML-like&amp;quot; type of code and looking around for a way to launch a 
simple blog website paired with free hosting, then &lt;a href=&quot;http://jekyllrb.com&quot;&gt;Jekyll&lt;/a&gt;&lt;/a&gt; 
should definitely be on your evaluation list. It&amp;#39;s open-source, text based and follows baking 
CMS principle by generating a static site from pre-written markup files. Pair it with free hosting 
from &lt;a href=&quot;http://pages.github.com&quot;&gt;GitHub Pages&lt;/a&gt;, comments from &lt;a href=&quot;http://disqus.com&quot;&gt;Disqus&lt;/a&gt; and you have 
yourself a very flexible blogging platform without required dependencies on a database and third party 
module/plugins.&lt;/p&gt;

&lt;p&gt;The keyphrase here is &amp;quot;flexible&amp;quot;, of course. And as we all know with 
&lt;em&gt;Great flexibility comes great responsibility&lt;/em&gt;. One such thing that I thought could be improved is 
the built-in way of highlighting code snippets with included line numbers. &lt;/p&gt;

&lt;h3 id=&quot;option-1:-via-addition-of-custom-css-rules&quot;&gt;Option 1: Via Addition of Custom CSS Rules&lt;/h3&gt;

&lt;p&gt;In order to have Jekyll highlight a 
snippet of code in your posts you basically need 3 things:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Add &lt;a href=&quot;https://gist.github.com/demisx/025698a7b5e314a7a4b5&quot;&gt;syntax highlighter CSS file&lt;/a&gt; as 
&lt;code&gt;css/syntax.css&lt;/code&gt; to your existing or newly generated Jekyll site&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Load CSS inside of a corresponding layout file (e.g. _layouts/default.html) 
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
...
&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;/css/syntax.css&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;stylesheet&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
...
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Wrap your code snippets in posts with 
&lt;code&gt;{% highlight ruby linenos %}...{% endhighlight %}&lt;/code&gt; Liquid tags and Jekyll
(via &lt;a href=&quot;http://pygments.org&quot;&gt;Pygments highlighter&lt;/a&gt;) outputs color highlighted code based on chosen 
language scheme (e.g. ruby in my case). &lt;span class=&quot;text-muted&quot;&gt;&lt;em&gt;(Note, if you don&amp;#39;t want to see 
line numbers appearing next to each code line, simply remove &lt;code&gt;linenos&lt;/code&gt; 
directive from &lt;code&gt;{% highlight ruby %}&lt;/code&gt; and, probably, there is need to read the 
rest of this post)&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;For example, this snippet of Ruby code:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;{% highlight ruby linenos %}
def show
  puts &amp;quot;Outputting a very lo-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-ong lo-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-ong line&amp;quot;
  @widget = Widget(params[:id])
  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @widget }
  end
end
{% endhighlight %}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;translates by Jekyll&amp;#39;s built-in syntax highlighter to this:&lt;/p&gt;

&lt;div class=&quot;preserve-original-format&quot;&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;lineno&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;show&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;2&lt;/span&gt;   &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Outputting a very lo-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-ong lo-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-ong line&amp;quot;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;3&lt;/span&gt;   &lt;span class=&quot;vi&quot;&gt;@widget&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Widget&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;4&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;respond_to&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;5&lt;/span&gt;     &lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# show.html.erb&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;6&lt;/span&gt;     &lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;render&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@widget&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;7&lt;/span&gt;   &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;

&lt;p&gt;Not bad, but could be better. Notice two major issues with the built-in highlighter:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Line numbers have too much prominence and sort of blend in with the main code&lt;/li&gt;
&lt;li&gt;Long lines similar to line 2 get wrapped making code less readable&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;I like when line numbers are grayed out and clearly separated from the main code. Also, I like when
long lines that don&amp;#39;t fit into the snippet container get clipped. This is similar to how GitHub handles their
snippets. However, I also don&amp;#39;t want to deviate from Jekyll&amp;#39;s core code by introducing all sorts of
third-party plugins unless it&amp;#39;s absolutely a must. I like my blog to be maintainable and upgradeable.&lt;/p&gt;

&lt;p&gt;So, to improve the formatting of line numbers, just add these 2 lines to your &lt;code&gt;syntax.css&lt;/code&gt; file
(&lt;a href=&quot;https://gist.github.com/demisx/8408522&quot;&gt;full version of syntax.css&lt;/a&gt;):&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;&lt;span class=&quot;lineno&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;/* Add to css/syntax.css */&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;.post&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;.highlight&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;.lineno&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;#ccc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;inline&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;border-right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1px&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;solid&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;#ccc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;.post&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;.highlight&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;pre&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;code&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;white-space&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pre&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;overflow-x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;auto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;word&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wrap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;normal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And now your code snippets will be highlighted as this:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;lineno&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;show&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;2&lt;/span&gt;   &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Outputting a very lo-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-ong lo-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-ong line&amp;quot;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;3&lt;/span&gt;   &lt;span class=&quot;vi&quot;&gt;@widget&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Widget&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;4&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;respond_to&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;5&lt;/span&gt;     &lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# show.html.erb&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;6&lt;/span&gt;     &lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;render&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@widget&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;7&lt;/span&gt;   &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;option-2:-via-embedded-github-gists&quot;&gt;Option 2: Via Embedded GitHub Gists&lt;/h3&gt;

&lt;p&gt;Another alternative to using Jekyll&amp;#39;s built-in highlighter is to use GitHub Gists. They are directly
embeddable into your posts with &lt;code&gt;{% gist [gist_number] %}&lt;/code&gt; tag.
Thus, if you are OK to host your code snippets on GitHub as gists, then inserting like this into your
post markup:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;{% gist 8387126 %} 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;will produce this GitHub-like formatted snippet loaded straight from GitHub and formatted like a GitHub
snippet:&lt;/p&gt;

&lt;p&gt;&lt;script src=&quot;https://gist.github.com/8387126.js&quot;&gt; &lt;/script&gt;&lt;/p&gt;

&lt;p&gt;I have mixed feelings about this particular approach. One one hand, it does make embedding properly 
highlighted snippets in my posts a walk in a park. On the other hand, it introduces dependency on GitHub. 
For now, I am sticking with built-in highlighter (Option 1) with GitHub gists being my fall-back option if 
things go south.&lt;/p&gt;

&lt;hr&gt;

&lt;h5 id=&quot;today-my-environment-was:&quot;&gt;Today my environment was:&lt;/h5&gt;

&lt;p&gt;Modestly tested on Jekyll v1.4.3 and may not cover all edge cases. Not been tested on some older 
browsers that didn&amp;#39;t bother to properly follow CSS standards at the time.&lt;/p&gt;
</description>
                                <pubDate>Mon, 13 Jan 2014 16:08:12 -0500</pubDate>
                                <link>http://demisx.github.io//jekyll/2014/01/13/improve-code-highlighting-in-jekyll.html</link>
                                <guid isPermaLink="true">http://demisx.github.io//jekyll/2014/01/13/improve-code-highlighting-in-jekyll.html</guid>
                        </item>
                
                        <item>
                                <title>Livereload Doesn&#39;t Reload BetterErrors Page</title>
                                <description>&lt;p&gt;My livereload was working fine until I&amp;#39;ve added the better_errors gem. Then, each time when 
an error page was shown by better_errors, I had to manually hit Command+R to reload that page in
order to see the changes I&amp;#39;ve made. Needless to say, this was quite inconvenient in the development. &lt;/p&gt;

&lt;p&gt;This issue was solved by placing the &lt;code&gt;Rack::LiveReload&lt;/code&gt; above the &lt;code&gt;BetterErrors::Middleware&lt;/code&gt; one 
in the middleware stack by changing this line in the &lt;code&gt;/config/environments/development.rb&lt;/code&gt; from 
the suggested:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;config.middleware.use Rack::LiveReload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;to:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;config.middleware.insert_before Rack::Lock, Rack::LiveReload  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;and then restarting Rails server. &lt;/p&gt;

&lt;p&gt;Make sure to run &lt;code&gt;rake middleware&lt;/code&gt; in the terminal and confirm that &lt;code&gt;Rack::LiveReload&lt;/code&gt; entry now 
precedes the &lt;code&gt;BetterErrors::Middleware&lt;/code&gt; entry in the middleware list.&lt;/p&gt;

&lt;hr&gt;

&lt;h5 id=&quot;today-my-environment-was:&quot;&gt;Today my environment was:&lt;/h5&gt;

&lt;ul&gt;
&lt;li&gt;better_errors 1.0.1&lt;/li&gt;
&lt;li&gt;rack-livereload 0.3.15&lt;/li&gt;
&lt;li&gt;Rails 4.0.0&lt;/li&gt;
&lt;/ul&gt;
</description>
                                <pubDate>Thu, 02 Jan 2014 07:17:04 -0500</pubDate>
                                <link>http://demisx.github.io//rails/2014/01/02/livereload-cannot-reload-bettererrors-page.html</link>
                                <guid isPermaLink="true">http://demisx.github.io//rails/2014/01/02/livereload-cannot-reload-bettererrors-page.html</guid>
                        </item>
                
        </channel>
</rss>
